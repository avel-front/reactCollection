# Как устроен Redux  

Главная особенность Redux заключается в том, что он предлагает изменять state ненапрямую, а опосредованно через вызов action, где action - это простой обьект. В отличии от Flux, он работает не с генераторами, а с чистыми функциями. Соответственно затем пишется чистая функция reducer, чтобы решить, каким образом каждый action преобразует state приложения. Вернуть нужно новый объект.

Нечистые reducer'ы формально будут обработаны, но строго не рекомендуется!

```
import {createStore} from 'redux'


export function counter(state = 0, action) {
    switch (action.type) {
        case 'INCREMENT':
            return state + 1
        case 'DECREMENT':
            return state - 1
        default:
            return state
    }
}
```

Редюсеры — это просто чистые функции, которые берут предыдущий state и action и возвращают новый state.  
Нельзя изменять объект state напрямую. Если state изменился, нужно возвращать новый объект.  
State может быть примитивом, массивом, объектом или структурой данных.

Когда приложение разрастается, большой reducer разбивается на мелкие reducer'ы через combineReducers.
Можно контролировать их порядок, отправлять дополнительные данные и переиспользовать их.


```
let store = createStore(counter)
```  
  
    
Это store, который хранит состояние приложения.
API: subscribe, dispatch, getState.


```
store.subscribe(() =>
    console.log(store.getState())
)
```

 Метод, который отвечает за обновление UI при изменении состояния.  
 Не рекомендуется использовать метод напрямую, лучше React-Redux.

```
store.dispatch({type: 'INCREMENT'})
store.dispatch({type: 'INCREMENT'})
store.dispatch({type: 'DECREMENT'})
```


Вызов action - единственный способ изменить внутренний state.  
Action - простой объект, поэтому он будет сериализован, залогирован/сохранен и воспроизведен.  
Сериализация - это процесс трансформации структуры данных в байты.  


## Три принципа работы  

1. Единственный источник, то есть state всего приложения хранится в дереве объектов внутри одного store.  

2. Единственный способ изменить state - применить action, то есть объект, который описывает, что случится.  

3. Для определения того, как дерево state будет изменено action'ами, используют чистые reducer'ы.
